@model CMCS.Prototype.Models.Claim
@{
    ViewData["Title"] = "Claim Details";
}

<h2>Claim Details</h2>

@if (TempData["Err"] != null)
{
    <div class="alert alert-danger">@TempData["Err"]</div>
}
@if (TempData["Msg"] != null)
{
    <div class="alert alert-success">@TempData["Msg"]</div>
}

<dl class="row">
    <dt class="col-sm-3">Lecturer</dt>
    <dd class="col-sm-9">@Model.Lecturer?.FullName</dd>
    <dt class="col-sm-3">Month / Year</dt>
    <dd class="col-sm-9">@Model.Month/@Model.Year</dd>
    <dt class="col-sm-3">Hours</dt>
    <dd class="col-sm-9">@Model.HoursWorked</dd>
    <dt class="col-sm-3">Hourly Rate</dt>
    <dd class="col-sm-9">@Model.HourlyRate.ToString("C2")</dd>
    <dt class="col-sm-3">Total</dt>
    <dd class="col-sm-9"><strong>@Model.TotalAmount.ToString("C2")</strong></dd>
    <dt class="col-sm-3">Status</dt>
    <dd class="col-sm-9">
        @switch (Model.Status)
        {
            case CMCS.Prototype.Models.DecisionStatus.Pending:
                <span class="badge bg-warning text-dark">Pending</span>
                ; break;
            case CMCS.Prototype.Models.DecisionStatus.Approved:
                <span class="badge bg-success">Approved</span>
                ; break;
            case CMCS.Prototype.Models.DecisionStatus.Rejected:
                <span class="badge bg-danger">Rejected</span>
                ; break;
        }
    </dd>
</dl>

<hr />

<h5>Supporting Documents</h5>
@if (Model.Documents == null || !Model.Documents.Any())
{
    <p class="text-muted">No documents uploaded yet.</p>
}
else
{
    <ul>
        @foreach (var d in Model.Documents)
        {
            <li>
                <a href="@d.FilePath" target="_blank">@d.FileName</a>
                <span class="text-muted">(@d.UploadedOn.ToShortDateString())</span>
            </li>
        }
    </ul>
}

<form asp-action="Upload" method="post" enctype="multipart/form-data" class="mt-3">
    @Html.AntiForgeryToken()
    <input type="hidden" name="claimId" value="@Model.ClaimId" />
    <div class="row g-2">
        <div class="col-sm-8">
            <input type="file" name="file" class="form-control" />
        </div>
        <div class="col-sm-4">
            <button class="btn btn-outline-secondary w-100">Upload</button>
        </div>
    </div>
    <p class="text-muted small mt-2">Allowed: PDF, DOCX, XLSX, JPG, JPEG, PNG. Max 5 MB.</p>
</form>

<p class="mt-4">
    <a class="btn btn-outline-secondary" asp-action="Index">Back</a>
    <a class="btn btn-primary" asp-action="Edit" asp-route-id="@Model.ClaimId">Edit</a>
</p>
